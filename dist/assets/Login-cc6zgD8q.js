import{r,u as j,w,j as s,O as c,x as b}from"./index-5vXlcsP3.js";import{B as y}from"./Button-Ci8q0XrN.js";const I="https://lv6.rhinogfx.com:5001",U=d=>{const{setIsLoggedIn:u}=d,[o,m]=r.useState(""),[n,g]=r.useState(""),[l,i]=r.useState(""),{members:p,setUser:x}=j(e=>e),h=w(),f=e=>p.find(a=>a.id===Number(e))||null,v=async e=>{e.preventDefault();try{const t=await b.post(`${I}/api/login`,{username:o,password:n});localStorage.setItem("token",t.data.token),localStorage.setItem("user",t.data.memberId);const a=f(t.data.memberId);x(a),i("Login successful!"),u(!0),h("/")}catch(t){i("Login failed: "+t.response.data.message)}};return s.jsx("div",{className:"login-screen",children:s.jsxs("div",{className:"login-form",children:[s.jsx("img",{style:{width:"80px"},src:"../lv6_Logo.svg"}),s.jsxs("form",{onSubmit:v,style:{display:"flex",flexDirection:"column",rowGap:"1rem",width:"100%"},children:[s.jsx(c,{type:"text",fullWidth:!0,placeholder:"Username",value:o,onChange:e=>m(e.target.value)}),s.jsx(c,{fullWidth:!0,type:"password",placeholder:"Password",value:n,onChange:e=>g(e.target.value)}),s.jsx(y,{fullWidth:!0,variant:"contained",type:"submit",children:"Sign In"})]}),l&&s.jsx("p",{children:l})]})})};export{U as default};
