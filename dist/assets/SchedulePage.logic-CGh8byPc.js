import{a9 as b,a as h,p as l,aa as D,ab as _}from"./index-BywWJzti.js";function S(s){const n=b(s),t=n.getFullYear();return n.setFullYear(t+1,0,0),n.setHours(23,59,59,999),n}const p=s=>{const n=[];let t=D(new Date(s,0,1));const r=S(t);for(;t<=r;)t.getDay()===0&&n.push(h(t,"yyyy-MM-dd")),t=_(t,1);return n},Y=(s,n)=>{const r=p(n).map(a=>({date:a,invocation:{},benediction:{}}));return s.forEach(a=>{const{date:e,id:i,first_name:c,last_name:f,type:d}=a,g=e,m=r.find(u=>u.date===g);m&&(d==="invocation"&&!m.invocation.id?m.invocation={id:i,name:`${c} ${f}`}:d==="benediction"&&!m.benediction.id&&(m.benediction={id:i,name:`${c} ${f}`}))}),r},w=(s,n,t)=>{const a=p(t).map(e=>({date:e,opening:{},sacrament:{},intermediate:{},closing:{},chorister:null,organist:null}));return a.forEach(e=>{const i=n.find(c=>c.date===e.date);i&&(e.chorister=i.chorister_id,e.organist=i.organist_id)}),s.forEach(e=>{const{id:i,date:c,hymn_number:f,name:d,song_title:g,performer:m,type:u}=e,M=h(l(c),"yyyy-MM-dd"),o=a.find(y=>y.date===M);if(o){const y={id:i,hymn_number:f,date:c,type:u,organist:o.organist,chorister:o.chorister};u==="opening"&&!o.opening.hymn_number?o.opening={...y,name:d,performer:"congregation"}:u==="sacrament"&&!o.sacrament.hymn_number?o.sacrament={...y,name:d,performer:"congregation"}:u==="intermediate"&&!o.intermediate.hymn_number?o.intermediate={...y,name:g,performer:m}:u==="closing"&&!o.closing.hymn_number&&(o.closing={...y,name:d,performer:"congregation"})}}),a},O=s=>{const n={};return s.forEach(r=>{const a=l(r.date),e=h(a,"MMMM yyyy");n[e]||(n[e]=[]),n[e].push(r)}),Object.entries(n).sort(([r],[a])=>new Date(a)-new Date(r))},v=()=>new Date().toLocaleString("default",{month:"long",year:"numeric"});export{O as a,w as b,v as g,Y as m};
