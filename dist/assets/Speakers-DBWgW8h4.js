import{c as Ue,j as t,r as g,a3 as Ee,p as Xe,a as qe,a2 as Je,t as ee,F as Qe,l as Ze,n as et,q as he,M as q,W as $e,x as Q,u as tt,e as rt}from"./index-BywWJzti.js";import{d as st,e as nt,f as Le,K as ue,a as ze,u as at,g as ot,i as it,C as Ne,h as ct,D as lt,P as Ye,j as dt,k as ut,b as pt,l as ft,c as mt,m as ht}from"./ProgramFieldLocal-uY5QBFw8.js";import{A as pe,D as ge,a as xe,b as be,c as ve}from"./Add-iX1LdWfD.js";import{g as Pe,C as gt}from"./getDate-CiplD_YF.js";import{B as z}from"./Button-B-EFBJZ7.js";import{A as xt}from"./AddMemberPopup-Cvy_7Z6i.js";import"./Typography-DO_idQ2S.js";import"./RadioGroup-BfFq2730.js";import"./FormControlLabel-C0p6GYRl.js";import"./Checkbox-6MNMXsxh.js";const bt=Ue(t.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");function Me(n,r,e){const s=n.slice();return s.splice(e<0?s.length+e:e,0,s.splice(r,1)[0]),s}function vt(n,r){return n.reduce((e,s,a)=>{const i=r.get(s);return i&&(e[a]=i),e},Array(n.length))}function fe(n){return n!==null&&n>=0}function yt(n,r){if(n===r)return!0;if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==r[e])return!1;return!0}function St(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const We=n=>{let{rects:r,activeIndex:e,overIndex:s,index:a}=n;const i=Me(r,s,e),c=r[a],m=i[a];return!m||!c?null:{x:m.left-c.left,y:m.top-c.top,scaleX:m.width/c.width,scaleY:m.height/c.height}},me={scaleX:1,scaleY:1},jt=n=>{var r;let{activeIndex:e,activeNodeRect:s,index:a,rects:i,overIndex:c}=n;const m=(r=i[e])!=null?r:s;if(!m)return null;if(a===e){const p=i[c];return p?{x:0,y:e<c?p.top+p.height-(m.top+m.height):p.top-m.top,...me}:null}const h=kt(i,a,e);return a>e&&a<=c?{x:0,y:-m.height-h,...me}:a<e&&a>=c?{x:0,y:m.height+h,...me}:{x:0,y:0,...me}};function kt(n,r,e){const s=n[r],a=n[r-1],i=n[r+1];return s?e<r?a?s.top-(a.top+a.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const Ge="Sortable",Be=Ee.createContext({activeIndex:-1,containerId:Ge,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:We,disabled:{draggable:!1,droppable:!1}});function Ct(n){let{children:r,id:e,items:s,strategy:a=We,disabled:i=!1}=n;const{active:c,dragOverlay:m,droppableRects:h,over:p,measureDroppableContainers:l}=st(),u=nt(Ge,e),b=m.rect!==null,v=g.useMemo(()=>s.map(I=>typeof I=="object"&&"id"in I?I.id:I),[s]),M=c!=null,E=c?v.indexOf(c.id):-1,w=p?v.indexOf(p.id):-1,N=g.useRef(v),T=!yt(v,N.current),_=w!==-1&&E===-1||T,D=St(i);Le(()=>{T&&M&&l(v)},[T,v,M,l]),g.useEffect(()=>{N.current=v},[v]);const A=g.useMemo(()=>({activeIndex:E,containerId:u,disabled:D,disableTransforms:_,items:v,overIndex:w,useDragOverlay:b,sortedRects:vt(v,h),strategy:a}),[E,u,D.draggable,D.droppable,_,v,w,h,b,a]);return Ee.createElement(Be.Provider,{value:A},r)}const It=n=>{let{id:r,items:e,activeIndex:s,overIndex:a}=n;return Me(e,s,a).indexOf(r)},Dt=n=>{let{containerId:r,isSorting:e,wasDragging:s,index:a,items:i,newIndex:c,previousItems:m,previousContainerId:h,transition:p}=n;return!p||!s||m!==i&&a===c?!1:e?!0:c!==a&&r===h},wt={duration:200,easing:"ease"},Ke="transform",Et=Ne.Transition.toString({property:Ke,duration:0,easing:"linear"}),Nt={roleDescription:"sortable"};function Mt(n){let{disabled:r,index:e,node:s,rect:a}=n;const[i,c]=g.useState(null),m=g.useRef(e);return Le(()=>{if(!r&&e!==m.current&&s.current){const h=a.current;if(h){const p=ct(s.current,{ignoreTransform:!0}),l={x:h.left-p.left,y:h.top-p.top,scaleX:h.width/p.width,scaleY:h.height/p.height};(l.x||l.y)&&c(l)}}e!==m.current&&(m.current=e)},[r,e,s,a]),g.useEffect(()=>{i&&c(null)},[i]),i}function Rt(n){let{animateLayoutChanges:r=Dt,attributes:e,disabled:s,data:a,getNewIndex:i=It,id:c,strategy:m,resizeObserverConfig:h,transition:p=wt}=n;const{items:l,containerId:u,activeIndex:b,disabled:v,disableTransforms:M,sortedRects:E,overIndex:w,useDragOverlay:N,strategy:T}=g.useContext(Be),_=Ot(s,v),D=l.indexOf(c),A=g.useMemo(()=>({sortable:{containerId:u,index:D,items:l},...a}),[u,a,D,l]),I=g.useMemo(()=>l.slice(l.indexOf(c)),[l,c]),{rect:Y,node:te,isOver:re,setNodeRef:W}=ze({id:c,data:A,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...h}}),{active:F,activatorEvent:K,activeNodeRect:se,attributes:ye,setNodeRef:ne,listeners:Se,isDragging:V,over:ae,setActivatorNodeRef:je,transform:ke}=at({id:c,data:A,attributes:{...Nt,...e},disabled:_.draggable}),Ce=ot(W,ne),P=!!F,H=P&&!M&&fe(b)&&fe(w),$=!N&&V,Z=$&&H?ke:null,ie=H?Z??(m??T)({rects:E,activeNodeRect:se,activeIndex:b,overIndex:w,index:D}):null,R=fe(b)&&fe(w)?i({id:c,items:l,activeIndex:b,overIndex:w}):D,k=F==null?void 0:F.id,y=g.useRef({activeId:k,items:l,newIndex:R,containerId:u}),ce=l!==y.current.items,le=r({active:F,containerId:u,isDragging:V,isSorting:P,id:c,index:D,items:l,newIndex:y.current.newIndex,previousItems:y.current.items,previousContainerId:y.current.containerId,transition:p,wasDragging:y.current.activeId!=null}),U=Mt({disabled:!le,index:D,node:te,rect:Y});return g.useEffect(()=>{P&&y.current.newIndex!==R&&(y.current.newIndex=R),u!==y.current.containerId&&(y.current.containerId=u),l!==y.current.items&&(y.current.items=l)},[P,R,u,l]),g.useEffect(()=>{if(k===y.current.activeId)return;if(k&&!y.current.activeId){y.current.activeId=k;return}const G=setTimeout(()=>{y.current.activeId=k},50);return()=>clearTimeout(G)},[k]),{active:F,activeIndex:b,attributes:ye,data:A,rect:Y,index:D,newIndex:R,items:l,isOver:re,isSorting:P,isDragging:V,listeners:Se,node:te,overIndex:w,over:ae,setNodeRef:Ce,setActivatorNodeRef:je,setDroppableNodeRef:W,setDraggableNodeRef:ne,transform:U??ie,transition:Ie()};function Ie(){if(U||ce&&y.current.newIndex===D)return Et;if(!($&&!it(K)||!p)&&(P||le))return Ne.Transition.toString({...p,property:Ke})}}function Ot(n,r){var e,s;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(e=n==null?void 0:n.draggable)!=null?e:r.draggable,droppable:(s=n==null?void 0:n.droppable)!=null?s:r.droppable}}ue.Down,ue.Right,ue.Up,ue.Left;function _t({date:n,children:r,handleAddSpeaker:e,handleAddSpecial:s,handleAddEvent:a,speakers:i=[],specialSundays:c=[]}){const{setNodeRef:m,isOver:h}=ze({id:n}),p=i.length>0,l=c==null?void 0:c.find(E=>E.date===n),u=Xe(n),b=Pe(u)<=7&&u.getDay()===0,v=Pe(u)<=7&&u.getDay()===0&&(u.getMonth()===3||u.getMonth()===9),M=Ee.Children.count(r);return t.jsxs(gt,{ref:m,className:"sunday-card",variant:"outlined",style:{background:h?"#ddefff":"#fff",transition:"background 0.2s"},children:[t.jsx("div",{className:"card--header",children:t.jsx("div",{className:"card--title",children:qe(u,"MMMM d")})}),t.jsx("div",{className:`card--content ${b||l?"special-sunday":""}`,children:l&&l.type!=="Ward Conference"?t.jsx("div",{className:"special-sunday-type",children:l.description||l.type}):v?t.jsx("div",{className:"special-sunday-type",children:"General Conference"}):b?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"special-sunday-type",children:"Fast Sunday"}),r,t.jsxs("div",{className:"add-item-button",onClick:()=>a(n),children:[t.jsx(pe,{fontSize:"small"}),"add special event"]})]}):t.jsxs(t.Fragment,{children:[r,t.jsxs("div",{className:"add-item-button",onClick:()=>a(n),children:[t.jsx(pe,{fontSize:"small"}),"add special event"]}),t.jsxs("div",{className:"add-item-button",onClick:()=>e(n),children:[t.jsx(pe,{fontSize:"small"}),"add speaker"]}),!p&&!l&&M===0&&t.jsxs("div",{className:"add-item-button",onClick:()=>s(n),children:[t.jsx(pe,{fontSize:"small"}),"add special sunday"]})]})})]})}const Te=n=>{const{id:r,name:e,subject:s,speaker_id:a,handleOpenEdit:i,handleDeleteSpeaker:c}=n,{attributes:m,listeners:h,setNodeRef:p,transform:l,transition:u,isDragging:b}=Rt({id:r}),v={display:"flex",alignItems:"center",borderRadius:"4px",fontSize:".9rem",cursor:"move",padding:".2rem",border:"1px solid #f9c399",backgroundColor:"#fbefd8",opacity:b?.5:1,transform:Ne.Transform.toString(l),transition:u},M={marginTop:".2rem",display:"flex",flexDirection:"column",flex:1},E={fontWeight:600},w={textTransform:"capitalize"},N="#f9c399";return t.jsxs("div",{ref:p,className:"speaker-container",style:v,children:[t.jsx("div",{...m,...h,style:{cursor:"move",display:"flex",alignItems:"center"},children:t.jsx(lt,{fontSize:"small",style:{color:N}})}),t.jsxs("div",{style:M,children:[e!=="Program Event"&&t.jsx("span",{style:E,children:e}),t.jsx("i",{style:{color:"#cb8525",...w},children:s})]}),t.jsxs("div",{children:[t.jsx(bt,{fontSize:"small",style:{color:N,cursor:"pointer"},className:"edit-button",onClick:()=>i({id:r,name:e,subject:s,speaker_id:a})}),t.jsx(Je,{fontSize:"small",style:{color:N,cursor:"pointer"},className:"delete-button",onClick:()=>c({id:r})})]})]})},At=n=>{const{open:r,handleClose:e,handleSave:s,specialSunday:a,setSpecialSunday:i}=n,c=()=>{if(a.type==="Other")return t.jsx(ee,{display:"flex",flexDirection:"column",rowGap:"1rem",children:t.jsx(he,{autoFocus:!1,fullWidth:!0,value:a.description||"",onChange:h=>i(p=>({...p,description:h.target.value})),label:"Description",name:"description"})})},m=[t.jsx(q,{value:"Ward Conference",children:"Ward Conference"},"ward conference"),t.jsx(q,{value:"Stake Conference",children:"Stake Conference"},"stake conference"),t.jsx(q,{value:"Fast Sunday",children:"Fast Sunday"},"fast sunday"),t.jsx(q,{value:"Primary Program",children:"Primary Program"},"primary program"),t.jsx(q,{value:"Christmas Program",children:"Christmas Program"},"christmas program"),t.jsx(q,{value:"Other",children:"Other"},"other")];return t.jsx(t.Fragment,{children:t.jsxs(ge,{open:r,onClose:e,PaperProps:{style:{overflowY:"visible",width:"800px"}},children:[t.jsx(xe,{children:"Add Special Sunday"}),t.jsxs(be,{children:[t.jsx(ee,{rowGap:"1rem",display:"flex",flexDirection:"column",mt:"1rem",children:t.jsxs(Qe,{fullWidth:!0,variant:"outlined",sx:{mb:3},children:[t.jsx(Ze,{id:"music-type-label",children:"Select Type"}),t.jsx(et,{labelId:"music-type-label",value:a.type,onChange:h=>{const p=h.target.value;i(l=>({...l,type:p}))},label:"Music Type",children:m})]})}),c()]}),t.jsxs(ve,{children:[t.jsx(z,{onClick:e,children:"Cancel"}),t.jsx(z,{onClick:()=>s(),color:"primary",variant:"contained",children:"Save"})]})]})})},Pt=n=>{const{open:r,handleClose:e,handleSaveSpeaker:s,selectedMember:a,setSelectedMember:i,members:c,scheduledSpeaker:m,setScheduledSpeaker:h,onAddMember:p}=n;return t.jsxs(ge,{open:r,onClose:e,PaperProps:{style:{overflowY:"visible",width:"800px"}},children:[t.jsx(xe,{children:"Add Speaker"}),t.jsx(be,{style:{zIndex:1},children:t.jsxs(ee,{rowGap:"1rem",display:"flex",flexDirection:"column",mt:"1rem",children:[t.jsx(Ye,{formValues:a||{member:{first_name:"",last_name:""}},setFormValues:i,options:c,fieldName:"member",fieldLabel:"Member",optionText:"first_name last_name",autoFocus:!0,onAddMember:l=>{p(l)}},"member"),t.jsx(he,{autoFocus:!1,fullWidth:!0,value:m.subject,onChange:l=>h(u=>({...u,subject:l.target.value})),label:"Subject",name:"subject",onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),s())}})]})}),t.jsxs(ve,{children:[t.jsx(z,{onClick:e,children:"Cancel"}),t.jsx(z,{onClick:()=>s(),color:"primary",variant:"contained",children:"Save"})]})]})},Tt=n=>{const{openEdit:r,handleClose:e,selectedMember:s,members:a,scheduledSpeaker:i,setScheduledSpeaker:c}=n,m=g.useRef(),h=void 0,{getSpeakerHistory2:p}=$e();g.useEffect(()=>{const u=b=>{b.key==="Enter"&&l()};return r&&document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}},[r]);const l=async()=>{const u=m.current.value;try{(await Q.patch(`${h}/api/speaker-update/${i.id}`,{subject:u})).status===200&&(p(),e())}catch(b){console.error("Failed to update speaker date/order",b)}};return t.jsxs(ge,{open:r,onClose:e,PaperProps:{style:{overflowY:"visible",width:"800px"}},children:[t.jsx(xe,{children:"Edit Speaker"}),t.jsx(be,{children:t.jsxs(ee,{rowGap:"1rem",display:"flex",flexDirection:"column",mt:"1rem",children:[t.jsx(Ye,{formValues:s,options:a,fieldName:"member",fieldLabel:"Member",optionText:"first_name last_name",autoFocus:!0,disabled:!0},"member"),t.jsx(he,{autoFocus:!1,fullWidth:!0,inputRef:m,value:i.subject,onChange:u=>c(b=>({...b,subject:u.target.value})),label:"Subject",name:"subject"})]})}),t.jsxs(ve,{children:[t.jsx(z,{onClick:()=>e(),children:"Cancel"}),t.jsx(z,{onClick:()=>l(),color:"primary",variant:"contained",children:"Save"})]})]})},Ft=({open:n,handleClose:r,handleSave:e,eventValue:s,setEventValue:a})=>t.jsxs(ge,{open:n,onClose:r,PaperProps:{style:{overflowY:"visible",width:"400px"}},children:[t.jsx(xe,{children:"Add Program Event"}),t.jsx(be,{children:t.jsx(ee,{rowGap:"1rem",display:"flex",flexDirection:"column",mt:"1rem",children:t.jsx(he,{autoFocus:!0,fullWidth:!0,value:s.subject||"",onChange:i=>a(c=>({...c,subject:i.target.value})),label:"Event",name:"event"})})}),t.jsxs(ve,{children:[t.jsx(z,{onClick:r,children:"Cancel"}),t.jsx(z,{onClick:e,color:"primary",variant:"contained",disabled:!s.subject,children:"Save"})]})]});function $t(n,r){const e=[],s=new Date(n,r-1,1);for(;s.getDay()!==0;)s.setDate(s.getDate()+1);for(;s.getMonth()===r-1;)e.push(s.toISOString().slice(0,10)),s.setDate(s.getDate()+7);return e}function Lt(n){const r={};return n.forEach(({date:e,speakers:s})=>{const[a,i]=e.split("-").slice(0,2);r[a]||(r[a]={}),r[a][i]||(r[a][i]=[]),r[a][i].push({date:e,speakers:s})}),r}function zt(n){const r={};return n.forEach(({date:e,speakers:s})=>{r[e]||(r[e]={date:e,speakers:[]}),r[e].speakers=r[e].speakers.concat((s||[]).filter(Boolean))}),Object.values(r)}const Fe=n=>n.reduce((r,e)=>(r[e.date]=(e.speakers||[]).filter(s=>s&&s.id).sort((s,a)=>(s.order??0)-(a.order??0)).map(s=>({...s,id:s.id,label:s.label||s.name||"No Label"})),r),{});function Yt(n){const r={};return(n||[]).forEach(e=>{e.date&&(r[e.date]||(r[e.date]=[]),r[e.date].push({id:e.id,speaker_id:e.speaker_id,label:e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.first_name||e.last_name||"No Name",subject:e.subject,order:e.order,...e}))}),Object.entries(r).map(([e,s])=>({date:e,speakers:s}))}function Wt(n,r,e,s){const a=[];let i=n,c=r;for(;i<e||i===e&&c<=s;)a.push({year:i,month:c}),c++,c>12&&(c=1,i++);return a}const J={speaker_id:void 0,date:void 0,subject:"",order:void 0},we={date:void 0,type:"",description:""},Gt={subject:""};function er(){const{members:n,fetchMemberData:r}=tt(),{specialSundays:e,setSpecialSundays:s}=rt(),{speakerHistory2:a,getSpeakerHistory2:i}=$e(),[c,m]=g.useState(null),[h,p]=g.useState({member:""}),[l,u]=g.useState(),[b,v]=g.useState(!1),[M,E]=g.useState(!1),[w,N]=g.useState(!1),[T,_]=g.useState(!1),[D,A]=g.useState(!1),[I,Y]=g.useState(we),[te,re]=g.useState({}),[W,F]=g.useState(Gt),K=()=>{p({member:""}),u(J),Y(we),v(!1),N(!1),_(!1),E(!1),A(!1)},se=o=>{let d={};if(typeof o=="string"){const f=o.trim().split(" ");f.length>=2?d={firstName:f[0],lastName:f.slice(1).join(" ")}:d={firstName:f[0],lastName:""}}else d=o;E(!0),re(d)},ye=async()=>{if(h&&h.member&&(l!=null&&l.date)){const o={...l,speaker_id:h.member.id,speaker_name:`${h.member.first_name} ${h.member.last_name}`,order:l.order??1};u(o);try{await Q.post(`${G}/api/speaker`,{newDates:[o.date],speakerId:o.speaker_id,order:o.order,subject:l.subject}),i(),p({member:""}),u(J),v(!1)}catch(d){console.error("Failed to save speaker",d)}}},ne=async()=>{if(I){const o=[...e,{date:I.date,type:I.type,description:I.description||null}];s(o);try{await Q.post(`${G}/api/sunday`,{date:I.date,type:I.type,description:I.description}),Y(we),_(!1)}catch(d){console.error("Failed to save speaker",d)}}},Se=async()=>{const o={date:W.date,speaker_id:410,speaker_name:"Program Event",order:W.order??1,subject:W.subject};try{await Q.post(`${G}/api/speaker`,{newDates:[o.date],speakerId:o.speaker_id,order:o.order,subject:o.subject}),i(),p({member:""}),u(J),A(!1)}catch(d){console.error("Failed to save speaker",d)}},V=o=>{let d=n.find(f=>f.id===o.speaker_id);p({member:d}),u(o),N(!0)},ae=async o=>{try{await Q.delete(`${G}/api/delete-speaker/${o.id}`),i()}catch{}},je=o=>{_(!0),Y(d=>({...d,date:o}))},ke=o=>{v(!0),console.log(o),u(d=>({...d,date:o}))},Ce=o=>{A(!0),F(d=>({...d,date:o}))},P=g.useMemo(()=>Yt(a),[a]),H=g.useMemo(()=>zt(P),[P]),$=new Date,Z=$.getFullYear()+1,oe=H.reduce((o,{date:d})=>{const[f,x]=d.split("-").map(Number);return f<o.year||f===o.year&&x<o.month?{year:f,month:x}:o},{year:$.getFullYear(),month:$.getMonth()+1}),ie=g.useMemo(()=>Wt(oe.year,oe.month,Z,12),[oe,Z]),R=g.useMemo(()=>{let o=[];return ie.forEach(({year:d,month:f})=>{$t(d,f).forEach(x=>{const C=H.find(O=>O.date===x);o.push({date:x,speakers:C?C.speakers:[]})})}),o},[ie,H]),[k,y]=g.useState(()=>Fe(R));g.useEffect(()=>{y(Fe(R))},[a]);const ce=g.useMemo(()=>{if(!a||a.length===0)return{};const o=Lt(R);return Object.values(o).forEach(d=>{Object.values(d).forEach(f=>{f.forEach(x=>{x.speakers&&x.speakers.length>1&&x.speakers.sort((C,O)=>(C.order??0)-(O.order??0))})})}),o},[R,a]),le=dt(ut(ht,{activationConstraint:{distance:5}})),U=o=>{if(o in k)return o;for(const d in k)if(k[d].find(f=>f.id===o))return d;return null},Ie=o=>{m(o.active.id)},G=void 0,Re=async o=>{try{const d=o.map(f=>Q.patch(`${G}/api/speaker/${f.id}`,{date:f.date,order:f.order}));await Promise.all(d),typeof i=="function"&&i()}catch(d){console.error("Failed to update speaker date/order",d)}},Ve=o=>{const{active:d,over:f}=o;if(m(null),!f)return;const x=U(d.id),C=U(f.id);if(!(!x||!C))if(x===C){const O=k[x].findIndex(j=>j.id===d.id),S=k[C].findIndex(j=>j.id===f.id);y(j=>{const L=Me(j[x],O,S),de=L.map((De,B)=>({...De,date:x,order:B+1}));return Re(de),{...j,[x]:L}})}else{const O=k[x].find(S=>S.id===d.id);y(S=>{const j=S[x].filter(B=>B.id!==d.id),L=S[C].findIndex(B=>B.id===f.id),de=L===-1?[...S[C],O]:[...S[C].slice(0,L),O,...S[C].slice(L)],De=de.map((B,He)=>({...B,date:C,order:He+1}));return Re(De),{...S,[x]:j,[C]:de}})}},X=c&&Object.values(k).flat().find(o=>o.id===c),Oe=g.useRef({}),_e=$.getFullYear().toString(),Ae=($.getMonth()+1).toString().padStart(2,"0");return g.useLayoutEffect(()=>{const o=`${_e}-${Ae}`,d=Oe.current[o];if(d){let f=d;for(;f&&!f.classList.contains("container");)f=f.parentElement;f&&f.scrollTop!==void 0&&(f.scrollTop=d.offsetTop-f.offsetTop-68)}},[ce,_e,Ae]),t.jsx("div",{className:"container",style:{overflowY:"auto",height:"92vh"},children:t.jsxs("div",{className:"scheduling-container",children:[t.jsxs(pt,{sensors:le,collisionDetection:ft,onDragStart:Ie,onDragEnd:Ve,children:[Object.entries(ce).sort(([o],[d])=>Number(d)-Number(o)).map(([o,d])=>t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:".5rem"},children:[Object.entries(d).sort(([f],[x])=>Number(x)-Number(f)).map(([f,x])=>{const C=x.flatMap(({date:S})=>{var j;return((j=k[S])==null?void 0:j.map(L=>L.id))||[]}),O=`${o}-${f.padStart(2,"0")}`;return t.jsx("div",{className:"month-row",ref:S=>{S&&(Oe.current[O]=S)},children:t.jsx(Ct,{items:C,strategy:jt,children:x.map(({date:S})=>t.jsx("div",{children:t.jsx(_t,{date:S,handleAddSpecial:je,handleAddSpeaker:ke,handleAddEvent:Ce,setSelectedMember:p,setScheduledSpeaker:u,selectedMember:h,specialSundays:e,children:(k[S]||[]).length===0?null:k[S].filter(j=>j&&j.id).map(j=>t.jsx(Te,{id:j.id,name:j.label,subject:j.subject,speaker_id:j.speaker_id,handleOpenEdit:V,handleDeleteSpeaker:ae},j.id))})},S))})},f)}),t.jsx("h3",{className:"year-header",children:o})]},o)),t.jsx(mt,{children:X?t.jsx(Te,{id:X.id,name:X.label||X.name,subject:X.subject,speaker_id:X.speaker_id,handleOpenEdit:V,handleDeleteSpeaker:ae}):null})]}),t.jsx(Pt,{open:b,handleClose:K,handleSaveSpeaker:ye,selectedMember:h,setSelectedMember:p,members:n,scheduledSpeaker:l??J,setScheduledSpeaker:u,onAddMember:se}),t.jsx(Tt,{openEdit:w,handleClose:()=>{N(!1),u(J),p({member:""})},selectedMember:h,setSelectedMember:p,members:n,scheduledSpeaker:l??J,setScheduledSpeaker:u}),t.jsx(At,{open:T,handleClose:K,handleSave:ne,setSpecialSunday:Y,specialSunday:I}),t.jsx(xt,{open:M,handleClose:K,onAddMember:se,outsideCreate:te||null,setOutsideCreate:re}),t.jsx(Ft,{open:D,handleClose:K,handleSave:Se,eventValue:W,setEventValue:F})]})})}export{er as default};
