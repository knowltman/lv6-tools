import{r,u as j,w,j as s,O as d,x as b}from"./index-BywWJzti.js";import{B as y}from"./Button-B-EFBJZ7.js";const I=void 0,U=c=>{const{setIsLoggedIn:u}=c,[n,m]=r.useState(""),[o,g]=r.useState(""),[l,i]=r.useState(""),{members:p,setUser:x}=j(e=>e),f=w(),h=e=>p.find(a=>a.id===Number(e))||null,v=async e=>{e.preventDefault();try{const t=await b.post(`${I}/api/login`,{username:n,password:o});localStorage.setItem("token",t.data.token),localStorage.setItem("user",t.data.memberId);const a=h(t.data.memberId);x(a),i("Login successful!"),u(!0),f("/")}catch(t){i("Login failed: "+t.response.data.message)}};return s.jsx("div",{className:"login-screen",children:s.jsxs("div",{className:"login-form",children:[s.jsx("img",{style:{width:"80px"},src:"../lv6_Logo.svg"}),s.jsxs("form",{onSubmit:v,style:{display:"flex",flexDirection:"column",rowGap:"1rem",width:"100%"},children:[s.jsx(d,{type:"text",fullWidth:!0,placeholder:"Username",value:n,onChange:e=>m(e.target.value)}),s.jsx(d,{fullWidth:!0,type:"password",placeholder:"Password",value:o,onChange:e=>g(e.target.value)}),s.jsx(y,{fullWidth:!0,variant:"contained",type:"submit",children:"Sign In"})]}),l&&s.jsx("p",{children:l})]})})};export{U as default};
